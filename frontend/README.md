# Jimuqu DevOps å‰ç«¯é¡¹ç›®è¯´æ˜

## é¡¹ç›®æ¦‚è¿°

åŸºäºVue3 + TypeScript + NaiveUI + Viteæ„å»ºçš„ç°ä»£åŒ–DevOpsç®¡ç†åå°ï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ç®¡ç†Dockerå®¹å™¨åŒ–éƒ¨ç½²å¹³å°ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3.5.17
- **å¼€å‘è¯­è¨€**: TypeScript 5.8.3
- **æ„å»ºå·¥å…·**: Vite 7.0.4
- **UIç»„ä»¶åº“**: Naive UI 2.42.0
- **çŠ¶æ€ç®¡ç†**: Pinia 3.0.3
- **è·¯ç”±ç®¡ç†**: Vue Router 4.5.1
- **å›¾è¡¨åº“**: ECharts 5.6.0
- **å›¾æ ‡åº“**: Iconify
- **CSSæ¡†æ¶**: UnoCSS
- **åŒ…ç®¡ç†å™¨**: pnpm 10.5.0+

## åŠŸèƒ½ç‰¹æ€§

### ğŸ  ä»ªè¡¨ç›˜
- ç³»ç»ŸçŠ¶æ€æ€»è§ˆ
- ç»Ÿè®¡æ•°æ®å±•ç¤ºï¼ˆåº”ç”¨æ•°é‡ã€æ„å»ºæ¬¡æ•°ã€æˆåŠŸç‡ç­‰ï¼‰
- æ„å»ºè¶‹åŠ¿å›¾è¡¨
- æœ€è¿‘æ„å»ºåˆ—è¡¨
- ä¸»æœºçŠ¶æ€ç›‘æ§
- å¿«é€Ÿæ“ä½œå…¥å£

### ğŸ–¥ï¸ ä¸»æœºç®¡ç†
- ä¸»æœºä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥
- SSHè¿æ¥é…ç½®å’Œæµ‹è¯•
- æ‰¹é‡ä¸»æœºçŠ¶æ€æ›´æ–°
- ä¸»æœºçŠ¶æ€å®æ—¶ç›‘æ§
- æ”¯æŒå¯†ç å’Œç§é’¥è®¤è¯

### ğŸ“¦ åº”ç”¨ç®¡ç†
- åº”ç”¨é…ç½®ç®¡ç†
- Gitä»“åº“é›†æˆ
- ç¯å¢ƒå˜é‡é…ç½®
- Webhooké…ç½®
- è‡ªåŠ¨/æ‰‹åŠ¨è§¦å‘è®¾ç½®
- ä¸€é”®æ„å»ºéƒ¨ç½²

### ğŸ”¨ æ„å»ºç®¡ç†
- æ„å»ºå†å²æŸ¥çœ‹
- å®æ—¶æ„å»ºæ—¥å¿—
- æ„å»ºæ­¥éª¤è¯¦æƒ…
- æ„å»ºçŠ¶æ€ç›‘æ§
- å¤±è´¥æ„å»ºåˆ†æ

## é¡µé¢ç»“æ„

```
src/views/devops/
â”œâ”€â”€ dashboard/          # ä»ªè¡¨ç›˜
â”‚   â””â”€â”€ index.vue
â”œâ”€â”€ host/              # ä¸»æœºç®¡ç†
â”‚   â””â”€â”€ index.vue  
â”œâ”€â”€ application/       # åº”ç”¨ç®¡ç†
â”‚   â””â”€â”€ index.vue
â””â”€â”€ build/             # æ„å»ºç®¡ç†
    â””â”€â”€ index.vue
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 20.19.0+
- pnpm 10.5.0+

### å®‰è£…ä¾èµ–
```bash
cd frontend
pnpm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
pnpm dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
pnpm build
```

### é¢„è§ˆç”Ÿäº§æ„å»º
```bash
pnpm preview
```

## é¡¹ç›®é…ç½®

### ç¯å¢ƒå˜é‡
```bash
# å¼€å‘ç¯å¢ƒ
VITE_API_BASE_URL=http://localhost:8080/api

# ç”Ÿäº§ç¯å¢ƒ  
VITE_API_BASE_URL=https://your-domain.com/api
```

### ä»£ç†é…ç½®
å¼€å‘ç¯å¢ƒä¸‹ï¼ŒViteä¼šè‡ªåŠ¨ä»£ç†APIè¯·æ±‚åˆ°åç«¯æœåŠ¡å™¨ï¼š

```typescript
// vite.config.ts
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
})
```

## é¡µé¢åŠŸèƒ½è¯¦è§£

### ä»ªè¡¨ç›˜é¡µé¢
- **ç»Ÿè®¡å¡ç‰‡**: æ˜¾ç¤ºåº”ç”¨æ€»æ•°ã€æ„å»ºæ¬¡æ•°ã€æˆåŠŸç‡ã€åœ¨çº¿ä¸»æœºæ•°
- **è¶‹åŠ¿å›¾è¡¨**: æœ€è¿‘7å¤©çš„æ„å»ºè¶‹åŠ¿çº¿å›¾
- **çŠ¶æ€åˆ†å¸ƒ**: æ„å»ºçŠ¶æ€çš„é¥¼å›¾åˆ†æ
- **æœ€è¿‘æ„å»º**: æœ€æ–°çš„æ„å»ºè®°å½•è¡¨æ ¼
- **ä¸»æœºçŠ¶æ€**: å®æ—¶æ˜¾ç¤ºå„ä¸»æœºè¿æ¥çŠ¶æ€
- **å¿«é€Ÿæ“ä½œ**: å¸¸ç”¨åŠŸèƒ½çš„å¿«æ·å…¥å£

### ä¸»æœºç®¡ç†é¡µé¢
- **ä¸»æœºåˆ—è¡¨**: åˆ†é¡µæ˜¾ç¤ºæ‰€æœ‰é…ç½®çš„ä¸»æœº
- **æœç´¢è¿‡æ»¤**: æ”¯æŒæŒ‰ä¸»æœºåç§°å’ŒIPæœç´¢
- **æ·»åŠ ä¸»æœº**: è¡¨å•å½•å…¥ä¸»æœºè¿æ¥ä¿¡æ¯
- **ç¼–è¾‘ä¸»æœº**: ä¿®æ”¹ä¸»æœºé…ç½®
- **è¿æ¥æµ‹è¯•**: å®æ—¶æµ‹è¯•SSHè¿æ¥çŠ¶æ€
- **æ‰¹é‡æ“ä½œ**: æ‰¹é‡æ›´æ–°ä¸»æœºçŠ¶æ€

### åº”ç”¨ç®¡ç†é¡µé¢
- **åº”ç”¨åˆ—è¡¨**: æ˜¾ç¤ºæ‰€æœ‰é…ç½®çš„åº”ç”¨é¡¹ç›®
- **Gité…ç½®**: è®¾ç½®ä»“åº“åœ°å€ã€åˆ†æ”¯ã€è®¤è¯ä¿¡æ¯
- **ç¯å¢ƒå˜é‡**: åŠ¨æ€é…ç½®æ„å»ºç¯å¢ƒå˜é‡
- **Webhookè®¾ç½®**: é…ç½®è‡ªåŠ¨è§¦å‘æ„å»º
- **ä¸€é”®æ„å»º**: æ‰‹åŠ¨è§¦å‘åº”ç”¨æ„å»º
- **æµæ°´çº¿é…ç½®**: è·³è½¬åˆ°æµæ°´çº¿é…ç½®é¡µé¢

### æ„å»ºç®¡ç†é¡µé¢
- **æ„å»ºåˆ—è¡¨**: æ˜¾ç¤ºæ‰€æœ‰æ„å»ºå†å²è®°å½•
- **çŠ¶æ€è¿‡æ»¤**: æŒ‰æ„å»ºçŠ¶æ€ç­›é€‰è®°å½•
- **æ—¥å¿—æŸ¥çœ‹**: å®æ—¶æŸ¥çœ‹æ„å»ºè¯¦ç»†æ—¥å¿—
- **æ­¥éª¤è¿½è¸ª**: æŸ¥çœ‹æ¯ä¸ªæ„å»ºæ­¥éª¤çš„æ‰§è¡Œæƒ…å†µ
- **æ“ä½œç®¡ç†**: å–æ¶ˆæ­£åœ¨è¿è¡Œçš„æ„å»º

## ç»„ä»¶ç‰¹æ€§

### å“åº”å¼è®¾è®¡
- æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- è‡ªé€‚åº”å¸ƒå±€å’Œç»„ä»¶
- è§¦æ‘¸å‹å¥½çš„äº¤äº’

### å®æ—¶æ›´æ–°
- æ„å»ºçŠ¶æ€å®æ—¶åˆ·æ–°
- ä¸»æœºè¿æ¥çŠ¶æ€ç›‘æ§
- è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

### ç”¨æˆ·ä½“éªŒ
- åŠ è½½çŠ¶æ€æŒ‡ç¤º
- é”™è¯¯æç¤ºå’Œå¤„ç†
- æ“ä½œç¡®è®¤å¯¹è¯æ¡†
- å‹å¥½çš„è¡¨å•éªŒè¯

## APIæ¥å£å¯¹æ¥

å‰ç«¯é¡µé¢é€šè¿‡Fetch APIä¸åç«¯æœåŠ¡é€šä¿¡ï¼š

```typescript
// ä¸»æœºç®¡ç†APIç¤ºä¾‹
const getHosts = async (page: number, size: number, keyword?: string) => {
  const params = new URLSearchParams({
    page: page.toString(),
    size: size.toString()
  });
  if (keyword) params.append('keyword', keyword);
  
  const response = await fetch(`/api/hosts?${params}`);
  return await response.json();
};

// è§¦å‘æ„å»ºAPIç¤ºä¾‹  
const triggerBuild = async (applicationId: number) => {
  const response = await fetch(`/api/applications/${applicationId}/build`, {
    method: 'POST'
  });
  return await response.json();
};
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢
1. åœ¨`src/views/devops/`ä¸‹åˆ›å»ºæ–°çš„é¡µé¢ç»„ä»¶
2. åœ¨`src/router/elegant/routes.ts`ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨`src/router/elegant/imports.ts`ä¸­æ·»åŠ ç»„ä»¶å¯¼å…¥
4. æ›´æ–°å¯¼èˆªèœå•é…ç½®

### æ ·å¼å¼€å‘
- ä½¿ç”¨UnoCSSåŸå­åŒ–CSSç±»
- ç»„ä»¶å†…æ ·å¼ä½¿ç”¨scoped
- éµå¾ªNaiveUIè®¾è®¡è§„èŒƒ

### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨Piniaè¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
- é¡µé¢çº§çŠ¶æ€ä½¿ç”¨Vue3 Composition API

## éƒ¨ç½²è¯´æ˜

### æ„å»ºä¼˜åŒ–
```bash
# ç”Ÿäº§æ„å»º
pnpm build

# åˆ†ææ„å»ºåŒ…å¤§å°
pnpm preview --host 0.0.0.0
```

### Nginxé…ç½®
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        root /var/www/devops-frontend;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä¾èµ–å®‰è£…å¤±è´¥**: æ£€æŸ¥Node.jså’Œpnpmç‰ˆæœ¬
2. **APIè¯·æ±‚å¤±è´¥**: ç¡®è®¤åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
3. **è·¯ç”±ä¸å·¥ä½œ**: æ£€æŸ¥è·¯ç”±é…ç½®å’Œç»„ä»¶å¯¼å…¥
4. **æ ·å¼å¼‚å¸¸**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡æ–°æ„å»º

### å¼€å‘å·¥å…·
- Vue DevTools: è°ƒè¯•Vueç»„ä»¶å’ŒçŠ¶æ€
- Networké¢æ¿: æ£€æŸ¥APIè¯·æ±‚
- Console: æŸ¥çœ‹é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-15)
- âœ¨ å®ŒæˆDevOpså¹³å°å‰ç«¯åˆå§‹ç‰ˆæœ¬
- ğŸ‰ å®ç°ä»ªè¡¨ç›˜ã€ä¸»æœºç®¡ç†ã€åº”ç”¨ç®¡ç†ã€æ„å»ºç®¡ç†é¡µé¢
- ğŸš€ é›†æˆNaiveUIç»„ä»¶åº“å’ŒEChartså›¾è¡¨
- ğŸ“± æ”¯æŒå“åº”å¼è®¾è®¡å’Œç§»åŠ¨ç«¯é€‚é…
- ğŸ”§ é…ç½®å®Œæ•´çš„å¼€å‘å’Œæ„å»ºç¯å¢ƒ